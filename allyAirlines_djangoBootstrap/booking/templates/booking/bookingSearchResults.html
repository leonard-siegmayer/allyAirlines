{% load static %}

{% include "booking/loginRequiredToast.html" %}

{% if  flights %}
<ul id="flightResultsList">
    {% for flight in flights %}
    <li>
        <form id="makeBookingForm{{flight.id}}" action="/checkout/" method="POST">
            {% csrf_token %}
            <input type="hidden" name="flight_id" aria-hidden="true" value={{flight.id}}>
            <input type="hidden" name="date" aria-hidden="true" value={{date}}>
            <input type="hidden" name="step" aria-hidden="true" value="0">
            <input type="hidden" name="max_step" aria-hidden="true" value="-1">
            <input type="hidden" name="previous_step" aria-hidden="true" value="-1">
            <a role="button" onclick="triggerForm({{flight.id}})"
                class="flight row bg-dark text-white rounded mb-2 mt-2" href="#">
                <div class="col">
                    <div class="row m-1">
                        <div class="d-none d-md-block col-sm-4 col-md-2 p-xl-3 my-auto border-right">
                            <img src="{% static 'booking/images/plane_icon1.svg' %}" class="w-100" alt=""
                                aria-hidden="true">
                        </div>
                        <div class="col my-auto">
                            <h3 class="mt-0">Abflug</h3>
                            <p class="mb-0">{{ flight.departureTime  }} Uhr<br>{{ flight.departureAirport }}</p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-3 col-md-2 my-auto border-right border-left m-1">
                    <h3 class="mt-0">Preis</h3>
                    <p class="mb-0">{{ flight.price }}€</p>
                </div>
                <div class="col">
                    <div class="row m-1">
                        <div class="col my-auto">
                            <h3 class="mt-0">Ankunft</h3>
                            <p class="mb-0">{{ flight.arrivalTime }} Uhr<br>{{ flight.arrivalAirport }}</p>
                        </div>
                        <div class="d-none d-md-block col-sm-4 col-md-2 p-xl-3 my-auto border-left">
                            <img src='{% static "booking/images/plane_icon2.svg" %}' class="w-100" alt=""
                                aria-hidden="true">
                        </div>
                    </div>
                </div>
            </a>
        </form>
    </li>
    {% endfor %}
</ul>
<!-- No results Alert -->
{% elif fullForm %}
<div class="alert alert-danger" style="color: black" role="alert">
    Für diese Suche wurden keine Ergebnisse gefunden.
</div>
<!-- Form misses some values Alert -->
{% else %}
<div class="alert alert-warning text-dark" role="alert">
    Bitte füllen Sie das Formular aus.
</div>
{% endif %}